# 生物化学文献推送系统优化方案（聚焦核心需求）

## 核心需求
每日推送一篇关于三大研究方向（生物固氮、胞外信号感知与传递、酶的结构与作用机制）的高质量论文。

## 代码分析
通过通读代码，我了解到系统的工作流程：
1. 从多个数据源获取论文（BioRxiv、PubMed、RSS、EuropePMC、GitHub）
2. 对论文进行去重、评分、排序和选择
3. 生成AI报告并推送给用户
4. 评分系统根据关键词匹配、期刊影响因子等计算分数
5. AI报告生成使用DeepSeek API生成

## 优化方案

### 1. 回退策略优化（app/ranking.py）
- **增加候选不足回退机制**：当候选论文数量不足时，自动扩大抓取窗口
- **优化TopK选择逻辑**：确保即使候选论文评分较低，也能选出至少一篇高质量论文
- **增加最低推送数量保障**：确保每日至少推送一篇论文

### 2. 评分系统优化（app/scoring.py）
- **提高核心关键词权重**：对三大研究方向的核心关键词增加更高的评分
- **优化期刊影响因子映射**：增加更多顶级期刊的影响因子映射
- **增加核心方向匹配加分**：对直接命中三大研究方向的论文增加额外评分

### 3. 数据源配置优化（app/cli.py）
- **确保数据源正常运行**：检查并修复数据源连接问题
- **优化数据源优先级**：将返回核心论文概率高的数据源放在优先位置
- **增加数据源重试机制**：对失败的数据源增加重试逻辑

### 4. 配置文件优化（app/config.py）
- **优化研究方向关键词**：确保关键词覆盖更全面，提高核心论文命中率
- **调整最低候选数**：适当调整最低候选数，确保有足够的论文进行选择
- **优化回退窗口配置**：确保回退机制能有效扩大抓取范围

### 5. 推送逻辑优化（app/cli.py）
- **确保每日推送**：无论候选论文质量如何，确保每日至少推送一篇论文
- **优化报告生成**：即使只有一篇论文，也能生成高质量的报告

## 预期效果
1. 系统能够每日推送一篇关于三大研究方向的高质量论文
2. 提高核心论文的识别率和命中率
3. 优化后的回退机制确保在候选论文不足时能扩大抓取范围
4. 评分系统更精准地评估论文质量和相关性

## 实施步骤
1. 修改app/ranking.py，增加候选不足回退机制
2. 优化app/scoring.py，提高核心关键词权重
3. 检查并修复数据源连接问题
4. 优化app/config.py中的配置参数
5. 测试优化效果，确保每日能推送高质量目标论文
6. 部署到生产环境

## 风险评估
- 放宽抓取范围可能导致少量低质量论文被推送，但核心论文命中率会提高
- 评分系统优化需要仔细调整，避免过度匹配
- 回退机制需要确保不会导致大量重复论文被推送

## 测试计划
1. 使用历史数据测试优化效果，确保核心论文命中率提高
2. 运行连续多日测试，确保每日能推送高质量目标论文
3. 测试候选论文不足时的回退机制，确保能扩大抓取范围
4. 对比优化前后的报告质量，确保报告更加聚焦和有价值